# å¯¦ç”¨æ¸¬è©¦ç­–ç•¥ - æ··åˆè‡ªå‹•åŒ–èˆ‡æ‰‹å‹•æ¸¬è©¦

## ğŸ¯ æ ¸å¿ƒåŸå‰‡

**èªæ¸…ç¾å¯¦**ï¼šAI ä»£ç†ç„¡æ³•æ“æ§éŠæˆ² GUIï¼Œå› æ­¤æˆ‘å€‘éœ€è¦ï¼š
1. **æœ€å¤§åŒ–è‡ªå‹•åŒ–æ¸¬è©¦**ï¼ˆç´”é‚è¼¯ï¼Œä¸ä¾è³´éŠæˆ²ç’°å¢ƒï¼‰
2. **æœ€å°åŒ–æ‰‹å‹•æ¸¬è©¦**ï¼ˆåƒ…é™å¿…é ˆåœ¨éŠæˆ²å…§é©—è­‰çš„éƒ¨åˆ†ï¼‰
3. **å»ºç«‹å¿«é€Ÿé©—è­‰æµç¨‹**ï¼ˆæ¸›å°‘é‡è¤‡å•Ÿå‹•éŠæˆ²çš„æ¬¡æ•¸ï¼‰

---

## ğŸ—ï¸ ä¸‰å±¤æ¸¬è©¦æ¶æ§‹

### **ç¬¬ä¸€å±¤ï¼šè‡ªå‹•åŒ–å–®å…ƒæ¸¬è©¦ï¼ˆâœ… å®Œå…¨è‡ªå‹•åŒ–ï¼‰**

**å¯ä»¥åœ¨æ²’æœ‰ Minecraft ç’°å¢ƒä¸‹æ¸¬è©¦çš„ç´” Java é‚è¼¯**ï¼š

#### 1ï¸âƒ£ **æ•¸æ“šåŒæ­¥ç³»çµ±**
```java
MachineSyncManagerTest.java
â”œâ”€ testIntTracking()          // æ¸¬è©¦ int å€¼è¿½è¹¤
â”œâ”€ testBooleanTracking()      // æ¸¬è©¦ boolean å€¼è¿½è¹¤
â”œâ”€ testDataSlotCount()        // æ¸¬è©¦ ContainerData æ§½ä½æ•¸é‡
â””â”€ testSyncOrderConsistency() // æ¸¬è©¦è¨»å†Šé †åºä¸€è‡´æ€§
```

#### 2ï¸âƒ£ **ç‹€æ…‹ç®¡ç†é‚è¼¯**
```java
ManaGeneratorStateManagerTest.java
â”œâ”€ testModeToggle()           // æ¸¬è©¦æ¨¡å¼åˆ‡æ›é‚è¼¯
â”œâ”€ testBurnTimeCalculation()  // æ¸¬è©¦ç‡ƒç‡’æ™‚é–“è¨ˆç®—
â””â”€ testModeValidation()       // æ¸¬è©¦æ¨¡å¼é©—è­‰
```

#### 3ï¸âƒ£ **NBT åºåˆ—åŒ–**
```java
BlockEntityNBTTest.java
â”œâ”€ testSaveAndLoad()          // æ¸¬è©¦ä¿å­˜èˆ‡è®€å–
â”œâ”€ testIOConfigPersistence()  // æ¸¬è©¦ IO é…ç½®æŒä¹…åŒ–
â””â”€ testRecipeStatePersistence() // æ¸¬è©¦é…æ–¹ç‹€æ…‹ä¿å­˜
```

#### 4ï¸âƒ£ **æ•¸å€¼è¨ˆç®—**
```java
ManaCalculationTest.java
â”œâ”€ testManaToEnergyConversion()
â”œâ”€ testInfusionCostCalculation()
â””â”€ testProgressPercentage()
```

---

### **ç¬¬äºŒå±¤ï¼šæ¨¡æ“¬æ¸¬è©¦ï¼ˆâš¡ éƒ¨åˆ†è‡ªå‹•åŒ–ï¼‰**

**ä½¿ç”¨ Mock å°è±¡æ¨¡æ“¬ Minecraft ç’°å¢ƒ**ï¼š

#### 1ï¸âƒ£ **Menu åŒæ­¥æ¸¬è©¦**
```java
ManaInfuserMenuTest.java
â”œâ”€ testClientSideDataAccess()  // Mock ContainerData æ¸¬è©¦å®¢æˆ¶ç«¯è®€å–
â”œâ”€ testSyncHelperBinding()     // æ¸¬è©¦ SyncHelper ç¶å®š
â””â”€ testProgressSync()           // æ¸¬è©¦é€²åº¦åŒæ­¥
```

#### 2ï¸âƒ£ **Widget äº‹ä»¶è™•ç†**
```java
AbstractWidgetTest.java
â”œâ”€ testMouseClickCoordinates() // æ¸¬è©¦åº§æ¨™è½‰æ›é‚è¼¯
â”œâ”€ testParentChildRelation()   // æ¸¬è©¦çˆ¶å­é—œä¿‚
â””â”€ testVisibilityHandling()    // æ¸¬è©¦å¯è¦‹æ€§è™•ç†
```

---

### **ç¬¬ä¸‰å±¤ï¼šæ‰‹å‹•éŠæˆ²æ¸¬è©¦ï¼ˆğŸ‘¤ å¿…é ˆæ‰‹å‹•ï¼‰**

**ç„¡æ³•é¿å…ï¼Œä½†å¯ä»¥å„ªåŒ–**ï¼š

#### âœ‹ **å¿…é ˆæ‰‹å‹•æ¸¬è©¦çš„é …ç›®**
1. **GUI æ¸²æŸ“æ­£ç¢ºæ€§**
   - å…ƒä»¶ä½ç½®æ˜¯å¦æ­£ç¢º
   - æè³ªé¡¯ç¤ºæ˜¯å¦æ­£å¸¸
   - å·¥å…·æç¤ºæ˜¯å¦å‡ºç¾

2. **è¦–è¦ºåé¥‹**
   - æŒ‰éˆ•æŒ‰ä¸‹å‹•ç•«
   - é€²åº¦æ¢å‹•ç•«
   - ç²’å­æ•ˆæœ

3. **å¤šäººæ¨¡å¼åŒæ­¥**
   - å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨æ•¸æ“šä¸€è‡´æ€§
   - å¤šç©å®¶åŒæ™‚æ“ä½œåŒä¸€æ©Ÿå™¨

#### ğŸ“‹ **å¿«é€Ÿé©—è­‰æ¸…å–®**ï¼ˆæ¯æ¬¡ä¿®æ”¹å¾Œä½¿ç”¨ï¼‰

```
â–¡ å•Ÿå‹•éŠæˆ²ï¼ˆå–®äººå‰µé€ æ¨¡å¼ï¼‰
â–¡ æ”¾ç½®æ©Ÿå™¨æ–¹å¡Š
â–¡ å³éµæ‰“é–‹ GUI
  â”œâ”€ â–¡ æ¨™é¡Œé¡¯ç¤ºæ­£ç¢º
  â”œâ”€ â–¡ é­”åŠ›æ¢é¡¯ç¤ºæ­£ç¢º
  â”œâ”€ â–¡ é€²åº¦æ¢ä½ç½®æ­£ç¢º
  â””â”€ â–¡ æŒ‰éˆ•å¯é»æ“Š
â–¡ æ¸¬è©¦åŠŸèƒ½
  â”œâ”€ â–¡ æ¨¡å¼åˆ‡æ›æŒ‰éˆ•ç”Ÿæ•ˆ
  â”œâ”€ â–¡ ç‰©å“è¼¸å…¥è¼¸å‡ºæ­£å¸¸
  â””â”€ â–¡ é…æ–¹è™•ç†æ­£ç¢º
â–¡ é—œé–‰éŠæˆ²
```

**é æœŸæ™‚é–“**ï¼š3-5 åˆ†é˜ï¼ˆç›¸æ¯”ä¹‹å‰ 10+ åˆ†é˜å¤§å¹…æ¸›å°‘ï¼‰

---

## ğŸ“ å¯¦éš›å¯è¡Œçš„å¯¦ç¾è¨ˆåŠƒ

### **éšæ®µ 1ï¼šç°¡å–®é–‹å§‹ï¼ˆ1 å°æ™‚ï¼‰**
âœ… **ä¸éœ€è¦ä»»ä½•æ¸¬è©¦æ¡†æ¶å³å¯é–‹å§‹**

1. **å‰µå»ºæ¸¬è©¦ç›®éŒ„**
   ```bash
   mkdir -p src/test/java/com/github/nalamodikk/common/sync
   ```

2. **æ‰‹å¯«ç¬¬ä¸€å€‹ç°¡å–®æ¸¬è©¦**
   - å‰µå»º `MachineSyncManagerTest.java`
   - ä½¿ç”¨æœ€åŸºæœ¬çš„ `assert` èªå¥ï¼ˆä¸ä¾è³´ JUnitï¼‰
   - ç”¨ `main` æ–¹æ³•é‹è¡Œæ¸¬è©¦

3. **å»ºç«‹æ¸¬è©¦æ—¥èªŒ**
   - åœ¨é …ç›®æ ¹ç›®éŒ„å‰µå»º `TEST_LOG.md`
   - è¨˜éŒ„æ¯æ¬¡æ‰‹å‹•æ¸¬è©¦çµæœ
   - æ¯”å°è‡ªå‹•æ¸¬è©¦èˆ‡æ‰‹å‹•æ¸¬è©¦çš„å·®ç•°

### **éšæ®µ 2ï¼šé€æ­¥å„ªåŒ–ï¼ˆæ ¹æ“šéœ€æ±‚ï¼‰**

**åªåœ¨çœŸæ­£éœ€è¦æ™‚æ‰æ·»åŠ **ï¼š

#### é¸é … Aï¼šæœ€å°åŒ–ä¾è³´ï¼ˆæ¨è–¦ï¼‰
```gradle
// build.gradle - åªæ·»åŠ æœ€åŸºæœ¬çš„æ¸¬è©¦æ”¯æŒ
dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.1'
}
```

#### é¸é … Bï¼šå®Œæ•´æ¸¬è©¦å¥—ä»¶ï¼ˆå¯é¸ï¼‰
```gradle
// å¦‚æœéœ€è¦ Mock åŠŸèƒ½æ‰æ·»åŠ 
dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.1'
    testImplementation 'org.mockito:mockito-core:5.7.0'
}
```

### **éšæ®µ 3ï¼šå»ºç«‹æ¸¬è©¦ç¿’æ…£ï¼ˆæŒçºŒï¼‰**

1. **æ¯æ¬¡ä¿®æ”¹é‚è¼¯æ™‚**
   - å…ˆå¯«ä¸€å€‹ç°¡å–®æ¸¬è©¦ï¼ˆ5 åˆ†é˜ï¼‰
   - ç¢ºèªé‚è¼¯æ­£ç¢ºå¾Œæ‰å•Ÿå‹•éŠæˆ²

2. **å¿«é€Ÿé©—è­‰æµç¨‹**
   ```bash
   # 1. é‹è¡Œè‡ªå‹•æ¸¬è©¦ï¼ˆå¿«é€Ÿï¼‰
   ./gradlew test --tests "MachineSyncManagerTest"

   # 2. å¦‚æœæ¸¬è©¦é€šéï¼Œç·¨è­¯éŠæˆ²ï¼ˆè¼ƒæ…¢ï¼‰
   ./gradlew build

   # 3. å•Ÿå‹•éŠæˆ²é€²è¡Œæœ€çµ‚é©—è­‰ï¼ˆæœ€æ…¢ï¼‰
   ./gradlew runClient
   ```

---

## ğŸš€ å¯¦ç”¨å‘½ä»¤

### **å¿«é€Ÿæ¸¬è©¦å–®å€‹é¡**
```bash
./gradlew test --tests "MachineSyncManagerTest"
```

### **æ¸¬è©¦å¤±æ•—æ™‚é¡¯ç¤ºè©³ç´°ä¿¡æ¯**
```bash
./gradlew test --info
```

### **è·³éæ¸¬è©¦ç›´æ¥æ§‹å»ºï¼ˆç·Šæ€¥æ™‚ä½¿ç”¨ï¼‰**
```bash
./gradlew build -x test
```

### **æ¸…ç†ä¸¦é‡æ–°æ¸¬è©¦**
```bash
./gradlew clean test
```

---

## ğŸ¯ å¯¦éš›æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™

| æ¨¡å¡Š | å„ªå…ˆç´š | ç›®æ¨™è¦†è“‹ç‡ | åŸå›  |
|------|--------|-----------|------|
| MachineSyncManager | ğŸ”´ æœ€é«˜ | 90%+ | æ ¸å¿ƒç³»çµ±ï¼ŒBug å½±éŸ¿æ‰€æœ‰æ©Ÿå™¨ |
| SyncHelper é¡åˆ¥ | ğŸŸ¡ ä¸­ç­‰ | 70%+ | ç°¡å–®é‚è¼¯ï¼Œä¸»è¦æ¸¬è©¦ç´¢å¼•æ­£ç¢ºæ€§ |
| Widget åº§æ¨™è½‰æ› | ğŸŸ¡ ä¸­ç­‰ | 60%+ | å·²ä¿®å¾©éï¼Œå»ºç«‹å›æ­¸æ¸¬è©¦ |
| BlockEntity Tick | ğŸŸ¢ è¼ƒä½ | 40%+ | è¤‡é›œé‚è¼¯ï¼Œå¤§éƒ¨åˆ†éœ€éŠæˆ²æ¸¬è©¦ |
| GUI æ¸²æŸ“ | âšª ä¸æ¸¬è©¦ | 0% | å¿…é ˆæ‰‹å‹•æ¸¬è©¦ |

---

## ğŸ”§ ç•¶å‰ç‹€æ…‹

### âœ… **å·²å®Œæˆ**
- [x] è¨­è¨ˆæ¸¬è©¦ç­–ç•¥
- [x] æ˜ç¢ºè‡ªå‹•åŒ–èˆ‡æ‰‹å‹•æ¸¬è©¦é‚Šç•Œ
- [x] å»ºç«‹å¿«é€Ÿé©—è­‰æ¸…å–®

### â³ **ä¸‹ä¸€æ­¥ï¼ˆæŒ‰éœ€æ±‚åŸ·è¡Œï¼‰**
- [ ] å‰µå»ºç¬¬ä¸€å€‹æ¸¬è©¦é¡ `MachineSyncManagerTest`
- [ ] æ·»åŠ  JUnit ä¾è³´åˆ° `build.gradle`
- [ ] æ¸¬è©¦ç¾æœ‰çš„åº§æ¨™è½‰æ›é‚è¼¯
- [ ] å»ºç«‹æ¸¬è©¦æ—¥èªŒ `TEST_LOG.md`

### ğŸ’¡ **å»ºè­°å·¥ä½œæµ**
1. å…ˆå®Œæˆç•¶å‰åŠŸèƒ½é–‹ç™¼
2. å°æ ¸å¿ƒé‚è¼¯æ·»åŠ ç°¡å–®æ¸¬è©¦
3. ç”¨éŠæˆ²é©—è­‰ GUI
4. æäº¤ä»£ç¢¼å‰é‹è¡Œä¸€æ¬¡æ¸¬è©¦

**ä¸è¦éåº¦å·¥ç¨‹åŒ–** - æ¸¬è©¦æ˜¯ç‚ºäº†ç¯€çœæ™‚é–“ï¼Œä¸æ˜¯å¢åŠ è² æ“”ï¼
