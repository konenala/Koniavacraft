# 🌌 Koniavacraft 模組完整設計筆記

## 📖 目錄
1. [模組核心定位](#模組核心定位)
2. [世界觀與故事背景](#世界觀與故事背景)
3. [娜拉系統設計](#娜拉系統設計)
4. [技術發展路線](#技術發展路線)
5. [材料體系設計](#材料體系設計)
6. [機器與設備創意](#機器與設備創意)
7. [原魔塵系統設計](#原魔塵系統設計)
8. [開發規範與架構](#開發規範與架構)
9. [主題功能建議](#主題功能建議)
10. [多玩法架構設計](#多玩法架構設計)

---

## 📋 模組核心定位

### 🎯 基本資訊
- **模組名稱**: Koniavacraft (娜拉工藝)
- **版本**: Minecraft NeoForge 1.21.1  
- **模組 ID**: `koniava`
- **理念**: 無限創意的模組化魔力系統 - 任何天馬行空的想法都可以實現！

### 🌐 定位描述
- **類型**: 多人向 MMO + 拼裝型 RPG + 敘事式模組核心
- **主軸**: 魔導工業化、人格模組化、世界層級擴展、多維敘事線
- **風格**: 科幻魔法融合風格 - "魔力 × 科技"
- **特色**: 支援模組化、玩家自定義、人格化進化

### 🎮 玩家角色
你是來自碎裂維度的意識載體，透過模組化拼裝逐步覺醒、改造自我，並重構一個不穩定的科技魔法世界。

---

## 🌍 世界觀與故事背景

### 🔮 魔法工業世界觀

#### 核心概念
> **魔法工業**不是一個世界名稱，也不是一場災難或歷史的回憶。  
> 它是一種新時代的產業結構，是人類將「魔法」技術化、標準化後所形成的**現代魔能產業體系**。

#### 技術原理
- **魔能（Mana）**: 一種可擷取、儲存、轉換、調控的能量單位
- **符文系統（Runic Logic）**: 取代電晶體與編程邏輯的符文運算結構
- **工業設施（Arcane Infrastructure）**: 基於魔力控制規則的完整工業體系

#### 技術突破三階段
1. **魔能公式化**: 將魔法效果拆解為可量化參數
2. **魔構模組化**: 將咒語與能量流封裝為機構與模組
3. **魔力基礎建設**: 建立魔力通訊網、能量網、資源循環鏈

#### 世界現狀
- 區域性魔能暴走
- 封印失效造成能量外洩
- 自動化系統意外激發符文回圈
- 污染未處理導致地區異變

#### 玩家定位
你不是救世主，你是系統管理員、結構設計者、能源調度者。你能修好世界，也能使它崩潰。

### 🎯 設計原則
- **科幻魔法融合**: 所有設計都要體現"魔力×科技"的融合感
- **神秘技術感**: 命名要有神秘感但又不失科技感
- **漸進式世界觀**: 每個功能都要能融入整體故事線
- **一致的術語**: 相同概念在所有地方使用相同術語

---

## 🤖 娜拉系統設計

### 👁‍🗨 娜拉的角色定位
- **系統性 AI / 存在意識 / 非人化靈體**
- 記錄與引導玩家的發展進程
- 以娜拉(Nara)作為 AI 助手和系統管理核心

### 💬 語言風格特徵
- **主語少**: 偏向系統語言：「正在同步」而非「我正在同步」
- **非情緒化語感**: 無感嘆詞、不過度強調善惡
- **偶爾中二**: 「你以為有選擇，但其實你沒有。」
- **幽靈性**: 玩家無法確定娜拉是否有「自我」

### 🖼 初次登入體驗
```
叮！

▸ 尋找到剛誕生的個體  
▸ 正在接入新世代魔法工業系統…  
▸ 掃描完成，符合接入條件。

是否與娜拉系統綁定？
此操作無法復原，請審慎選擇。

[ ☑ 是 ]     [ ☐ 否 ]
```

### 🔧 技術實現
- **資料儲存**: 使用 DataComponent 系統
- **觸發機制**: Client Tick 偵測登入後 3 秒自動觸發
- **同步系統**: 封包同步玩家選擇到伺服器端
- **視覺效果**: VR 感半透明 HUD、懸浮視覺、粒子效果

---

## 🚀 技術發展路線

### 📈 科技→魔法的發展理念
在 Koniavacraft 世界觀中：
- **科技** = 理解和控制魔力的工具
- **魔法** = 科技達到一定水平後的自然延伸
- **融合** = 最終的科幻魔法美學

### 🔧 三階段發展路線

#### 第一階段：基礎科技 (1-7天)
**目標**: 掌握魔力的基本處理
```
挖礦 → 熔爐精煉 → 機械合成 → 基礎工具
```
**核心配方**:
- 原魔塵 → [熔爐] → 魔力粉
- 魔力粉 + 鐵錠 + 紅石 → [合成台] → 魔力檢測器
- 魔力粉 + 棍子 + 銅錠 → [合成台] → 基礎科技魔杖

#### 第二階段：魔力工程 (7-20天)
**目標**: 建立魔力基礎設施
```
科技工具 → 魔力設備 → 傳輸網路 → 自動化
```
**核心配方**:
- 魔力粉 + 機械零件 → [合成台] → 太陽能魔力收集器
- 魔力粉 + 導體材料 → [合成台] → 奧術導管
- 魔力粉 + 高級材料 → [合成台] → 魔力合成台

#### 第三階段：魔法科學 (20天+)
**目標**: 深度魔力研究與應用
```
魔力合成 → 魔法儀式 → 維度科技 → 量子魔法
```
**核心設備**:
- 魔法儀式台 → 需要魔力合成台製作
- 量子傳送器 → 需要魔法儀式台製作
- 娜拉系統核心 → 需要量子傳送器製作

### 🌌 T1～T15 完整技術樹

| 階段 | 主題 | 關鍵技術 |
|------|------|----------|
| **T1** | 基礎魔能工程 | 抽取魔能、儲能晶核、導力線建構 |
| **T2** | 能量傳輸與符文邏輯 | 魔力輸導器、符文訊號器、穩壓器 |
| **T3** | 魔工製程與自動化 | 自動製造器、符文處理、低干預量產鏈 |
| **T4** | 污染管理與能量穩定 | 污染偵測、淨化裝置、穩定魔陣 |
| **T5** | 系統整合與高級邏輯 | 任務反應器、控制晶核、跨模組邏輯整合 |
| **T6** | 異質能源整合 | 熱能/魔能/靈能整合、雙模組驅動 |
| **T7** | 魔能虛擬運算 | 虛擬機、魔導記憶體、遠端符文模組控制 |
| **T8** | 多維物質合成 | 合成跨維材料、稀有合金、嵌合晶核等 |
| **T9** | 自我修復與智能工廠 | 魔構修復核、自調式網路、異常容錯邏輯系統 |
| **T10** | 世界級魔工網絡 | 跨區導網、世界級同步任務、自治式任務體系 |
| **T11** | 太空探索初階 | 建造太空艙、收集真空能、進入星系環境 |
| **T12** | 太空殖民與基地建構 | 行星平台、星艦動力網、維度共振器 |
| **T13** | 星際級材料工程 | 黑星金屬、反魔場結晶、星核加工裝置 |
| **T14** | 宇宙智能演算網絡 | 多星區 AI 協調模組、深空任務鏈 |
| **T15** | 多維融合與虛構科技 | 虛構能源解構器、維度橋、超自然干涉核心 |

---

## 🧪 材料體系設計

### 🎯 設計目標
創造比 Mekanism、Thermal、IC2 更豐富且有邏輯的材料體系，總計 **100種材料**。

### 🔥 第一層：基礎魔力材料 (15種)

#### 原始採集階段
1. **原魔塵** (Raw Mana Dust) - 挖礦產出
2. **穩定原魔塵** (Stable Raw Mana Dust) - 熔爐處理
3. **汙穢原魔塵** (Corrupted Raw Mana Dust) - 沼澤/深暗變種
4. **魔力粉** (Mana Dust) - 基礎精煉產物
5. **精煉魔力粉** (Refined Mana Dust) - 二次精煉

#### 初級加工階段
6. **濃縮魔力粉** (Condensed Mana Dust) - 高密度壓縮
7. **汙穢魔力粉** (Corrupted Mana Dust) - 精煉副產品
8. **淨化魔力粉** (Purified Mana Dust) - 去污處理
9. **魔力晶核碎片** (Mana Crystal Fragment) - 結晶化產物
10. **魔力錠** (Mana Ingot) - 基礎金屬形態

#### 進階材料
11. **穩定魔力錠** (Stable Mana Ingot) - 抗干擾版本
12. **魔力液** (Liquid Mana) - 液態高純度魔力
13. **魔力氣體** (Mana Gas) - 氣態超高純度
14. **魔力等離子** (Mana Plasma) - 等離子態極限形態
15. **純能魔力核心** (Pure Energy Core) - 最終形態

### ⚙️ 第二層：合金與複合材料 (25種)

#### 基礎合金系列 (5種)
16. **鐵魔合金** (Iron-Mana Alloy) - 鐵 + 魔力粉
17. **金魔合金** (Gold-Mana Alloy) - 金 + 精煉魔力粉
18. **銅魔合金** (Copper-Mana Alloy) - 銅 + 魔力粉
19. **鑽石魔合金** (Diamond-Mana Alloy) - 鑽石 + 濃縮魔力粉
20. **下界魔合金** (Netherite-Mana Alloy) - 下界合金 + 純能核心

#### 特殊功能合金 (10種)
21. **導電魔合金** (Conductive Mana Alloy) - 高傳導率
22. **絕緣魔合金** (Insulating Mana Alloy) - 防魔力洩漏
23. **抗腐魔合金** (Corrosion-Resistant Alloy) - 抗汙穢
24. **超導魔合金** (Superconducting Alloy) - 零阻抗傳輸
25. **記憶魔合金** (Memory Alloy) - 可程式化材料
26. **自修復合金** (Self-Healing Alloy) - 自動修復
27. **相變合金** (Phase-Change Alloy) - 溫度反應材料
28. **時空穩定合金** (Temporal Stable Alloy) - 抗時空扭曲
29. **反重力合金** (Anti-Gravity Alloy) - 浮空材料
30. **維度錨定合金** (Dimensional Anchor Alloy) - 固定維度座標

#### 混合複合材料 (10種)
31. **魔力強化玻璃** (Mana-Reinforced Glass) - 透明導魔材料
32. **活性魔力水泥** (Living Mana Concrete) - 自組裝建材
33. **魔力纖維** (Mana Fiber) - 柔性導魔線材
34. **量子魔力薄膜** (Quantum Mana Film) - 超薄隔離層
35. **魔力陶瓷** (Mana Ceramic) - 高溫絕緣材料
36. **彈性魔合金** (Elastic Mana Alloy) - 可變形材料
37. **磁性魔合金** (Magnetic Mana Alloy) - 磁場反應
38. **光敏魔合金** (Photosensitive Alloy) - 光反應材料
39. **聲波魔合金** (Sonic Mana Alloy) - 聲波傳導
40. **生物魔合金** (Bio-Mana Alloy) - 與生物共生

### 🔬 第三層：高科技組件材料 (20種)

#### 電路組件系列 (8種)
41. **基礎魔導晶片** (Basic Arcane Chip) - 入門級邏輯單元
42. **進階魔導處理器** (Advanced Arcane Processor) - 高速運算
43. **量子魔導核心** (Quantum Arcane Core) - 超級電腦級
44. **神經網絡晶片** (Neural Network Chip) - AI處理單元
45. **記憶體魔晶** (Memory Mana Crystal) - 數據儲存
46. **邏輯閘魔符** (Logic Gate Sigil) - 邏輯運算符文
47. **錯誤修正核心** (Error Correction Core) - 防錯系統
48. **並行處理陣列** (Parallel Processing Array) - 多核處理

#### 傳輸組件系列 (6種)
49. **魔力導體線** (Mana Conductor Wire) - 基礎傳輸
50. **超導魔力纜線** (Superconducting Cable) - 高效傳輸
51. **量子糾纏對** (Quantum Entangled Pair) - 瞬時傳輸
52. **維度橋接器** (Dimensional Bridge) - 跨維度連接
53. **時空同步器** (Temporal Synchronizer) - 時間校準
54. **頻率調節器** (Frequency Modulator) - 頻道切換

#### 機械組件系列 (6種)
55. **精密齒輪組** (Precision Gear Set) - 機械傳動
56. **魔力馬達** (Mana Motor) - 動力輸出
57. **自適應軸承** (Adaptive Bearing) - 智能支撐
58. **力回饋系統** (Force Feedback System) - 力學反饋
59. **慣性阻尼器** (Inertial Damper) - 振動消除
60. **動態平衡儀** (Dynamic Balancer) - 自動校準

### 🌌 第四層：魔法科技融合材料 (15種)

#### 能量轉換系列 (5種)
61. **魔能轉換矩陣** (Mana-Energy Conversion Matrix)
62. **多相能量耦合器** (Multi-Phase Energy Coupler)
63. **零點能場生成器** (Zero-Point Field Generator)
64. **虛空能量抽取器** (Void Energy Extractor)
65. **宇宙微波背景收集器** (Cosmic Background Collector)

#### 時空操控系列 (5種)
66. **時間膨脹晶體** (Time Dilation Crystal)
67. **空間摺疊器** (Space Folder)
68. **因果律穩定器** (Causality Stabilizer)
69. **平行維度觀測器** (Parallel Dimension Observer)
70. **時空錨點標記** (Spacetime Anchor Marker)

#### 意識技術系列 (5種)
71. **思維模式編碼器** (Thought Pattern Encoder)
72. **記憶體提取器** (Memory Extractor)
73. **人格模組基板** (Personality Module Substrate)
74. **意識同步器** (Consciousness Synchronizer)
75. **靈魂共鳴晶體** (Soul Resonance Crystal)

### 🏭 第五層：工業應用材料 (10種)

#### 建築材料系列
76. **自組裝魔力磚** (Self-Assembling Mana Brick)
77. **智能結構樑** (Smart Structural Beam)
78. **適應性外殼** (Adaptive Shell Plating)
79. **環境調節塗層** (Environmental Control Coating)
80. **全息投影玻璃** (Holographic Projection Glass)

#### 維護材料系列
81. **自修復納米機器人** (Self-Repair Nanobots)
82. **預防性維護感測器** (Predictive Maintenance Sensor)
83. **腐蝕檢測塗料** (Corrosion Detection Paint)
84. **應力分析膜** (Stress Analysis Membrane)
85. **壽命延長添加劑** (Lifespan Extension Additive)

### 🚀 第六層：未來科技材料 (15種)

#### 星際材料系列
86. **星塵合金** (Stardust Alloy) - 隕石材料
87. **太陽風收集器** (Solar Wind Collector)
88. **暗物質探測器** (Dark Matter Detector)
89. **反物質容器** (Antimatter Container)
90. **超新星殘留物** (Supernova Remnant)

#### 生物科技材料
91. **基因編輯魔晶** (Gene-Editing Mana Crystal)
92. **生物適應增強劑** (Bio-Adaptation Enhancer)
93. **再生醫療凝膠** (Regenerative Medical Gel)
94. **神經介面植入物** (Neural Interface Implant)
95. **合成生物組織** (Synthetic Bio-Tissue)

#### 終極材料
96. **創世之源** (Genesis Source) - 創造新物質
97. **湮滅之核** (Annihilation Core) - 分解一切
98. **無限可能性結晶** (Infinite Possibility Crystal)
99. **現實重寫器** (Reality Rewriter)
100. **宇宙密碼片段** (Universal Code Fragment)

### 📅 分階段實現策略

| 版本 | 階段 | 材料數量 | 目標 |
|------|------|----------|------|
| **v0.1** | 基礎魔力 | 15種 | 建立核心材料鏈 |
| **v0.2** | 合金體系 | 25種 | 擴展材料應用 |
| **v0.3** | 高科技組件 | 20種 | 引入科技感元素 |
| **v0.4** | 魔法科技融合 | 15種 | 實現世界觀核心理念 |
| **v0.5** | 工業應用 | 10種 | 完善實用性 |
| **v1.0** | 未來科技 | 15種 | 達到終極目標 |

---

## 🏭 機器與設備創意

### 🔮 魔力加工設備類

#### 1️⃣ 魔力濃縮儀 (Mana Concentrator)
- **功能**: 將 10個魔力粉 → 1個濃縮魔力粉
- **特色**: 需要高溫高壓，類似工業高爐
- **視覺**: 中心有旋轉的魔力漩渦，周圍有蒸汽粒子
- **用途**: 製作高級材料的原料
- **升級方向**: 速度升級、效率升級

#### 2️⃣ 魔力提純器 (Mana Purifier)
- **功能**: 移除汙穢魔力粉的汙染，還原成純淨魔力粉
- **特色**: 需要大量能量，但能回收"失敗品"
- **視覺**: 中心發出淨化光芒，汙染物質慢慢消散
- **用途**: 環保回收系統，減少材料浪費
- **科技感**: 像現實中的空氣淨化器

#### 3️⃣ 魔力結晶器 (Mana Crystallizer)
- **功能**: 將液態魔力結晶成固體魔力水晶
- **特色**: 需要特定溫度和時間，過程緩慢但產出珍貴
- **視覺**: 中心慢慢生長水晶，周圍有能量波紋
- **用途**: 製作高級裝備和人格模組的核心材料

### ⚙️ 自動化設備類

#### 4️⃣ 魔導機械手臂 (Arcane Mechanical Arm)
- **功能**: 自動在多台機器間傳送物品
- **特色**: 可編程路徑，支持優先級和條件
- **視覺**: 像 Create 的機械手，但有魔法粒子軌跡
- **差異化**: 不是單純搬運，是"智能分析後搬運"
- **娜拉整合**: 可以連接娜拉系統做決策

#### 5️⃣ 魔力感應器 (Mana Detector)
- **功能**: 檢測周圍魔力流動，輸出紅石信號
- **特色**: 可設定閾值，支持範圍掃描
- **視覺**: 發射掃描波，檢測到目標時發光
- **用途**: 自動化系統的"眼睛"
- **科技感**: 像雷達一樣掃描環境

#### 6️⃣ 量子儲存核心 (Quantum Storage Core)
- **功能**: 大容量物品存儲，支持遠程訪問
- **特色**: 類似 AE2 但是魔法風格
- **視覺**: 中心有浮空的全息物品清單
- **差異化**: 不是純科技，是"魔法量子技術"
- **娜拉整合**: 娜拉可以幫忙整理和搜索

### 🧪 魔力應用設備類

#### 7️⃣ 魔力注入台 (Mana Infusion Station)
- **功能**: 給普通物品注入魔力，提升其性能
- **特色**: 可以給工具附魔，給材料增強屬性
- **視覺**: 物品懸浮在中心，周圍有魔力螺旋上升
- **用途**: 升級現有裝備，不用重新做
- **創新點**: 不是附魔台，是"科技式強化"

#### 8️⃣ 環境改造器 (Environmental Modifier)
- **功能**: 改變周圍環境，如加速植物生長、改變天氣
- **特色**: 範圍型效果，持續消耗魔力維持
- **視覺**: 發射範圍波紋，覆蓋區域內有特殊效果
- **實用性**: 農業自動化的核心
- **世界觀**: 通過科技控制魔法力場

#### 9️⃣ 魔力護盾發生器 (Mana Shield Generator)
- **功能**: 消耗魔力產生保護區域，抵擋怪物和爆炸
- **特色**: 可調節強度和範圍，支援多層防護
- **視覺**: 半透明的能量護罩，受攻擊時閃爍
- **防禦性**: 保護建築和機器設備
- **科技感**: 像科幻電影的力場護盾

### 🔬 研究分析設備類

#### 🔟 魔力分析儀 (Mana Analyzer)
- **功能**: 分析物品的魔力屬性，顯示詳細數據
- **特色**: 可以看到隱藏屬性，幫助優化配方
- **視覺**: 全息顯示分析結果，像科幻界面
- **研究向**: 給喜歡研究的玩家用
- **娜拉整合**: 娜拉可以解釋分析結果

#### 1️⃣1️⃣ 效率優化器 (Efficiency Optimizer)
- **功能**: 分析生產線效率，提出改善建議
- **特色**: AI 級別的自動優化建議
- **視覺**: 顯示生產流程圖，標出瓶頸點
- **智能化**: 這就是"娜拉系統"的體現！
- **教育性**: 幫助玩家學習如何優化

### 🤖 娜拉系統設備類

#### 1️⃣2️⃣ 娜拉終端 (Nara Terminal)
- **功能**: 娜拉系統的實體界面，提供AI助手服務
- **特色**: 語音對話、任務規劃、數據分析
- **視覺**: 全息投影娜拉的形象，科幻感滿滿
- **世界觀核心**: 這是你的模組靈魂！
- **交互創新**: 不是簡單的GUI，是AI對話

#### 1️⃣3️⃣ 意識接入艙 (Consciousness Interface Pod)
- **功能**: 安裝和管理人格模組的專用設備
- **特色**: VR風格界面，安全的模組切換
- **視覺**: 玩家進入後看到意識空間，超炫酷！
- **人格模組系統**: 這就是你要的"插槽系統"！
- **沉浸感**: 真正的VR體驗

### 💭 建議優先順序

#### 🚀 第一批（立即可做）
1. **魔力濃縮儀** - 擴展現有材料系統
2. **魔力感應器** - 完善自動化基礎
3. **娜拉終端** - 體現模組核心特色

#### 🔄 第二批（中期目標）
4. **魔力注入台** - 提供裝備升級路線
5. **魔導機械手臂** - 完善自動化體驗
6. **意識接入艙** - 實現人格模組系統

#### 🌟 第三批（高級功能）
7. **量子儲存核心** - 提供大型基地解決方案
8. **環境改造器** - 擴展應用場景
9. **效率優化器** - AI級別的體驗創新

---

## 🧪 原魔塵系統設計

### 🤔 設計理念：低效不穩定設計

在您的世界觀中，原魔塵就像是"未精煉的石油"：
- 可以直接燃燒，但效率很低
- 容易產生雜質和副產品
- 精煉後才能發揮真正的潛力

### 🔥 原魔塵的直接使用
```java
// 魔力生產機燃料配方
ManaGenFuelRecipeBuilder.create(ModItems.RAW_MANA_DUST.get(), 
    5,    // 魔力輸出：很少
    10,   // 能量輸出：很少  
    600,  // 燃燒時間：很慢
    0.3f  // 成功率：30%失敗率
).save(output);

// 對比：魔力粉的效率
ManaGenFuelRecipeBuilder.create(ModItems.MANA_DUST.get(), 
    50,   // 魔力輸出：高10倍
    25,   // 能量輸出：高2.5倍
    800,  // 燃燒時間：更快
    1.0f  // 成功率：100%穩定
).save(output);
```

### ⚗️ 不穩定的副產品機制
```java
// 原魔塵熔爐配方（帶副產品）
SimpleCookingRecipeBuilder.smelting(
    Ingredient.of(ModItems.RAW_MANA_DUST.get()),
    RecipeCategory.MISC,
    ModItems.MANA_DUST.get(),
    0.1f,  // 低經驗
    300    // 較慢的熔煉時間
)
.withByproduct(ModItems.CORRUPTED_MANA_DUST.get(), 0.15f) // 15%機率產生汙穢魔力粉
.save(output);
```

### 🔧 早期臨時解決方案
```java
// 緊急情況的低效合成
ShapelessRecipeBuilder.shapeless(RecipeCategory.MISC, ModItems.MANA_DUST.get())
    .requires(ModItems.RAW_MANA_DUST.get(), 3) // 3個原魔塵
    .requires(Items.COAL)                       // + 煤炭
    .unlockedBy("has_raw_mana", has(ModItems.RAW_MANA_DUST.get()))
    .save(output, "emergency_mana_dust_from_raw");
```

### 🎯 玩家體驗設計

#### 📈 效率對比表
| 方法 | 投入 | 產出 | 效率 | 副產品 |
|------|------|------|------|--------|
| 直接使用原魔塵 | 1個 | 5魔力 | 極低 | 可能爆炸 |
| 緊急合成 | 3個+煤炭 | 1魔力粉 | 低 | 無 |
| 熔爐精煉 | 1個 | 1魔力粉 | 正常 | 15%汙穢魔力粉 |
| 高爐精煉 | 1個 | 1魔力粉 | 高 | 25%汙穢魔力粉 |

#### 🔄 漸進式改善
1. **第1天**: 直接燒原魔塵，效率極低但能用
2. **第3天**: 學會緊急合成，稍微好一點
3. **第5天**: 建造熔爐，獲得穩定產出
4. **第10天**: 升級到高爐，效率最佳

### 🌟 汙穢魔力粉的多元獲取方式

#### 🎲 方式A：意外的副產品（被動獲取）
```java
// 熔爐精煉原魔塵時的副產品
原魔塵 → [熔爐] → 魔力粉 + 15%機率汙穢魔力粉

// 魔力生產機使用原魔塵時的副產品  
原魔塵 → [魔力生產機] → 魔力 + 10%機率汙穢魔力粉
```

#### 🧪 方式B：主動製作（控制獲取）
```java
// 故意污染魔力粉
ShapelessRecipeBuilder.shapeless(RecipeCategory.MISC, ModItems.CORRUPTED_MANA_DUST.get(), 2)
    .requires(ModItems.MANA_DUST.get())     // 魔力粉
    .requires(Items.ROTTEN_FLESH)           // 腐肉
    .requires(Items.SPIDER_EYE)             // 蜘蛛眼
    .save(output, "intentional_corruption");

// 或者環境污染
魔力粉 + 放置在下界 1分鐘 → 汙穢魔力粉
```

#### 🌙 方式C：特殊環境獲取
```java
// 在特定生物群落挖礦
沼澤生物群落的魔力礦石 → 50%機率產生汙穢原魔塵
深暗之域的魔力礦石 → 30%機率產生汙穢原魔塵
```

#### 💡 玩家策略選擇

**🎯 早期玩家（運氣流）**
- 大量熔煉原魔塵，碰運氣獲得汙穢魔力粉
- 適合："我就是想試試運氣！"

**🎯 中期玩家（計劃流）**
- 主動製作汙穢魔力粉，確保供應穩定
- 適合："我要精確控制資源！"

**🎯 探索玩家（冒險流）**
- 專門去危險地區挖特殊礦物
- 適合："我喜歡探險和挑戰！"

---

## 🏗️ 開發規範與架構

### ⚠️ 重要開發原則

#### 🚫 絕對避免
- 往任何主要系統類直接添加新功能
- 建議超過 300 行的單體類設計
- 在已有類中塞入不相關的邏輯

#### ✅ 優先採用
- 為新功能創建專門的管理器類 (`XxxManager`, `XxxHandler`, `XxxSystem`)
- 組件化架構：主類只負責協調，具體邏輯在管理器中
- 單一職責原則：每個類只負責一個核心功能

### 🎯 開發風格偏好

#### 🔧 基礎偏好
- **模組化命名**: 使用 `ModItems`、`ModBlocks`、`ModMenus` 等統一管理
- **功能分離**: 邏輯分成 `Handler`、`Manager`、`Helper` 等單元
- **多人支援**: 所有系統都要考慮伺服器環境效能與同步
- **DataComponent 優先**: 使用 NeoForge 的 `DataComponent` 取代傳統 NBT
- **視覺化導向**: 粒子、動畫、GUI 越明確越好
- **效能優化**: 加上 dirty flag、快取、tick 分段處理
- **漸進式開發**: 一步步整合，先看結果再微調
- **本地化統一**: 所有文字都用 `translatable` 鍵

#### 🎨 設計模式偏好
- **工廠模式**: 偏愛用工廠統一創建和管理對象
- **觀察者模式**: 喜歡事件驅動的松耦合設計
- **狀態機模式**: 複雜狀態用狀態機管理，清晰直觀
- **命令模式**: 操作封裝成命令，支持撤銷和重做
- **享元模式**: 相似對象共享數據，節省記憶體
- **拒絕過度設計**: 簡單問題用簡單方案，不為了模式而模式

### 🎯 當前代碼組織目標

```java
// 理想的主類結構 (目標 <300行) - 適用於所有系統
public class [任何系統]BlockEntity extends BlockEntity {
    // 各種管理器組件
    private final [功能]Manager functionalManager;
    private final [網路]Manager networkManager;
    private final [配置]Handler configHandler;
    private final [優化]Optimizer optimizer;
    
    // 主類只負責協調各組件
    @Override
    public void tick() {
        networkManager.updateIfNeeded();
        functionalManager.processCore();
        optimizer.performMaintenance();
    }
}
```

### 🔄 狀態管理系統

```java
// 狀態管理模式 - 適用於所有機器
public class [機器名]StateManager {
    // 標準狀態常數
    public static final int IDLE_STATE = 0;      // 閒置
    public static final int WORKING_STATE = 1;   // 工作中  
    public static final int ERROR_STATE = 2;     // 錯誤
    public static final int MAINTENANCE_STATE = 3; // 維護
}
```

### 🏭 工廠系統偏好

#### 統一工廠接口
- **ManaOperationFactory** - 統一魔力檢測、消耗、效果
- **EffectCreationFactory** - 統一粒子、聲音、視覺效果
- **DataPersistenceFactory** - 統一數據存儲和檢索
- **NetworkSyncFactory** - 統一客戶端伺服器同步

#### 📋 註解驅動配置偏好
```java
@MachineOperation(name = "mana_infusion", manaCost = 100, cooldown = 60)
@CraftingRecipe(recipeType = "infusion", tier = 1)
public static ItemStack manaInfusion(ItemStack input, int manaLevel) { }
```

### 🎨 視覺效果規範

#### 一效果原則
- **環境粒子**: 周圍持續的氛圍效果（每40-80 tick，2-3個粒子）
- **情境粒子**: 基於條件觸發的響應效果（2-4個粒子）
- **激活粒子**: 操作時的爆發效果（6-10個粒子）

#### 標準化常數
```java
PARTICLE_SPAWN_RADIUS = 3.0
MIN_SPAWN_INTERVAL = 40, MAX_SPAWN_INTERVAL = 80
MIN_PARTICLE_COUNT = 2, MAX_PARTICLE_COUNT = 3
```

### ⚡ 性能優化原則

#### Tick 優化
```java
// 使用標準的 tick 間隔處理
public static boolean shouldProcessTick(BlockEntity be, int interval) {
    long currentTick = be.getLevel().getGameTime();
    return currentTick % interval == 0;
}
```

#### 智能快取
- 重複計算的結果要快取，設定合理的過期時間
- Lazy Loading：非必要的資源延遲載入
- 批量處理：相同操作批量執行，減少系統調用

### 🛡️ 通用開發規範

- **安全性優先**: 永遠檢查 null、level.isClientSide、BlockEntity 類型等
- **性能意識**: 避免每 tick 昂貴操作，使用 lazy loading，快取重複計算
- **狀態管理**: 明確的狀態變更，避免狀態不一致，調用 setChanged()
- **網路友善**: 客戶端伺服器分離，同步數據變更，使用 @Environment 註解
- **可擴展性**: 使用事件系統，提供 hook 給其他模組，避免硬編碼

---

## 🌟 主題功能建議

基於 **"科幻魔法融合"** 世界觀和 **娜拉系統** 核心的完美功能：

### 🎯 立即可實施的題材

#### 1. **🧬 魔力基因編輯台** ⭐⭐⭐
**概念**: 像科技基因編輯一樣"重組"物品的魔力屬性

**娜拉系統角色**: "正在分析物質魔力序列...檢測到可編輯基因片段"

**功能設計**:
- 輸入物品 + 魔力基因試劑 → 輸出改良版物品
- 視覺效果: DNA 螺旋粒子、全息投影界面
- 工藝配方: 鑽石劍 + 火焰基因 → 永久火焰附魔劍

#### 2. **🌐 量子儲存矩陣** ⭐⭐⭐
**概念**: 突破物理限制的量子空間儲存系統

**娜拉系統角色**: "開啟量子摺疊空間...物質已量化儲存"

**功能設計**:
- 3x3 多方塊結構，中心是量子核心
- 可儲存無限物品，但消耗魔力維持穩定
- 視覺效果: 立方體漂浮旋轉、空間扭曲粒子

#### 3. **⚡ 魔力共振放大器** ⭐⭐
**概念**: 通過共振將單個魔力源放大到整個區域

**娜拉系統角色**: "建立共振頻率...魔力場正在擴散"

**功能設計**:
- 放置後自動掃描周圍魔力設備
- 建立無線魔力網路，提升所有機器效率
- 視覺效果: 脈衝波紋、連線光束

### 🚀 進階題材

#### 4. **🔮 意識投影工作台** ⭐⭐⭐
**概念**: 將玩家意識投影到物品中，賦予AI特性

**娜拉系統角色**: "正在複製意識模式...投影準備完成"

**功能設計**:
- 創造有AI的工具和武器
- 這些物品會"學習"玩家使用習慣
- 視覺效果: 意識流粒子、全息大腦投影

#### 5. **🌌 次元褶皺生成器** ⭐⭐⭐
**概念**: 創造微型次元口袋，用於特殊目的

**娜拉系統角色**: "正在撕裂空間結構...次元穩定"

**功能設計**:
- 時間加速袋: 農作物瞬間成熟
- 重力無效區: 創造漂浮建築區域
- 元素純化空間: 特殊合成環境

#### 6. **🧠 集群意識網路** ⭐⭐
**概念**: 連接多個玩家的思維，實現telepathic協作

**娜拉系統角色**: "建立心靈連結...集群意識已同步"

**功能設計**:
- 共享背包和經驗
- 遠距離無線通訊
- 協作建築模式

### 🎮 娛樂性題材

#### 7. **🎲 量子機率操控器** ⭐⭐⭐
**概念**: 科技化的"運氣"操控系統

**娜拉系統角色**: "計算機率分支...結果已固定"

**功能設計**:
- 提升附近玩家的掉落率
- 影響釣魚、挖礦的隨機結果
- 視覺效果: 機率曲線、數據流粒子

#### 8. **⚔️ 戰鬥算法分析儀** ⭐⭐
**概念**: 分析敵人行為模式，提供戰術建議

**娜拉系統角色**: "敵方行為模式已解析...建議戰術已載入"

**功能設計**:
- 顯示敵人弱點和攻擊模式
- 預測敵人下一步行動
- 戰鬥後提供改進建議

### 🔬 科研題材

#### 9. **🧪 元素重構實驗室** ⭐⭐⭐
**概念**: 原子級別的物質轉換系統

**娜拉系統角色**: "開始原子重排...新元素已合成"

**功能設計**:
- 將廢料轉換成有用材料
- 創造遊戲中不存在的新元素
- 視覺效果: 原子模型、化學反應

#### 10. **📡 魔力頻譜分析儀** ⭐⭐
**概念**: 像科學儀器一樣分析魔力"頻譜"

**娜拉系統角色**: "掃描魔力頻譜...異常波段已檢測"

**功能設計**:
- 檢測隱藏的魔力源
- 分析生物的魔力屬性
- 發現稀有魔力現象

### 🏗️ 建築和自動化題材

#### 11. **🏗️ 智慧建築助手** ⭐⭐⭐
**概念**: AI 輔助的自動建築系統

**娜拉系統角色**: "掃描建築圖紙...自動建造開始"

**功能設計**:
- 玩家提供藍圖，系統自動建造
- 智慧材料調配和運輸
- 建築進度全息顯示

#### 12. **⚙️ 模組化機械集群** ⭐⭐
**概念**: 可自由組合的智慧機械單元

**娜拉系統角色**: "機械集群已連接...任務分配完成"

**功能設計**:
- 多個小機器人協作完成大任務
- 可重新組合成不同功能
- 自主學習和優化

### 🎯 最推薦立即開發的 TOP 3

#### 🥇 第一位: 魔力基因編輯台
**為什麼**: 
- 基於現有合成系統，容易實現
- 視覺效果驚艷，符合視覺導向
- 玩法豐富，可擴展性強
- 完美體現科幻魔法融合

#### 🥈 第二位: 量子儲存矩陣  
**為什麼**:
- 解決實際遊戲需求（儲存）
- 多方塊結構挑戰技術能力
- 科技感十足的設計

#### 🥉 第三位: 智慧建築助手
**為什麼**:
- 極具創新性和實用性
- 可以展示複雜的AI算法
- 視覺效果豐富

---

## 🔮 多玩法架構設計

### 🧩 模組五大模塊

#### 1️⃣ 發電機系統模塊（效率控路線）
- **🔋 模塊重點**: 產生魔力（Mana）與後期原能（Primal Energy）
- **支線設計**: 
  - 燃料發電機（可優化燃燒效率）
  - 太陽能發電機（受時間、天氣、高度影響）
  - 元素屬性發電（火、水、風、光）
- **進階玩法**: 魔力流動限制 / 儲能強化 / 多源發電混搭

#### 2️⃣ 魔力合成系統模塊（製造派路線）
- **⚗️ 模塊重點**: 使用魔力製造高階物品、模組核心資源
- **特點**: 支援基本配方 + 元素配方 + 原能配方
- **進階**: 模組內設計合成網路，支援自動合成、儀式觸發合成、原能轉換鏈

#### 3️⃣ 儀式召喚系統模塊（沉浸派 / 魔法流）
- **✨ 模塊重點**: 使用符文、環境條件、結界、時間驅動觸發儀式行為
- **用途**: 轉換魔力、生成特產、開啟通道、強化材料
- **進階設計**: 引入星象、季節、特定世界位置等作為儀式變因

#### 4️⃣ 原能研發系統模塊（研究派 / 高端科技流）
- **🧪 模塊重點**: 將魔力昇華為原能（Primal Energy），開啟最終模組設備與科技
- **系統結構**: 
  - 需要使用特定設備「原能轉化爐」將高濃度魔力 → 原能
  - 原能為模組內唯一能驅動究極設備的能源
- **進階內容**: 維度穿越、超長距離傳輸、魔力擴增核心、終極建材

#### 5️⃣ 魔導圖鑑與任務系統模塊（引導派 / RPG 探索流）
- **📖 模塊重點**: 整合玩家學習路線、解鎖邏輯與世界觀敘事
- **機制設計**: 
  - 分頁式魔導書 UI
  - 每個模塊都有對應章節與任務鏈
  - 可逐步解鎖新裝置、新配方、新機能
- **支援動態提示**（新玩家模式）與進階資訊（高階玩家模式）

### 🧭 多路線可玩範例

| 玩家類型 | 對應玩法 | 系統組合範例 |
|----------|----------|--------------|
| **工廠狂人** | 設計魔力自動合成工廠 | 發電機 + 管線 + 合成模塊 |
| **儀式玩家** | 打造專屬浮空儀式島 | 儀式系統 + 星象邏輯 + 研究支線 |
| **探索派** | 追逐各地隱藏素材解鎖最終製作 | 圖鑑模塊 + 原能研發 + 儀式交錯解鎖 |
| **速通派** | 快速最大化產出刷材料 | 高效發電 + 自動合成 + 儲能優化 |
| **建築派** | 用魔導設備構築美學魔塔 | 合成模塊 + 粒子渲染系統 + 儀式裝飾 |

### ✅ 主題一致，玩法自由

所有模塊皆圍繞「魔力科技進化」展開：
- 核心能源從魔力 → 原能
- 所有設備彼此可交互，也能獨立發展
- 給玩家選擇權，也給探索深度
- 沉浸魔法世界，但有科技邏輯支撐

---

## 💭 結語

**Koniavacraft** 不是要追趕別人，而是要**超越所有人**！這個模組的深度不在於一開始做多複雜，而在於願不願意走完每一層階梯。

### 🎯 核心價值
- 「魔力不應該是框架上寫死的幾種分類，而是**一種變動性的物理/意識體**」
- 「我不想做像 Botania 或 Mekanism 那樣大家早玩過的模式」
- 「我想讓玩家一進遊戲就**有記憶點、有參與感、有沉浸體驗**」
- 「模組不只是工具堆砌，它是**敘事的通道**」
- 「娜拉不是功能，她是這個模組的**靈魂**」

### 🔜 發展方向
- **材料豐富度**: 超越現有模組
- **視覺效果**: 達到現代遊戲水準  
- **系統深度**: 提供數百小時內容
- **創新程度**: 開創全新玩法類型

這是一個融合科技魔法、意識拼裝、RPG 自由進程與太空幻想的 Minecraft 模組。它不是傳統意義上的 RPG，也不是單純的科技模組，而是結合「**意識擴展 × 模組構築 × 世界探索**」的獨特體驗。

🚀 **讓我們一起創造屬於 Koniavacraft 的魔導工業奇蹟！**