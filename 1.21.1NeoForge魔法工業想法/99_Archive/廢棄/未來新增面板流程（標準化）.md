ä½ ç¾åœ¨çš„ç³»çµ±æ¶æ§‹è¨­è¨ˆå¾—ä¸éŒ¯ï¼Œå·²ç¶“æœ‰äº†ä¸€å€‹ **ä¸­å¤®ç®¡ç†å™¨ (`FloatingPanelManager`)** + **é¢æ¿åŸºåº•é¡ (`FloatingScreen`)**ã€‚æœªä¾†ä½ è¦æ–°å¢æ–°çš„æµ®ç©º GUIï¼Œåªè¦éµå®ˆä¸‹é¢é€™å€‹æ­¥é©Ÿå°±å¯ä»¥äº†ã€‚

---

## âœ… æœªä¾†æ–°å¢é¢æ¿æµç¨‹ï¼ˆæ¨™æº–åŒ–ï¼‰

### 1ï¸âƒ£ æ–°å¢ä½ çš„ `FloatingScreen` å­é¡ï¼Œä¾‹å¦‚ï¼š

```java
public class MyNewFloatingScreen extends FloatingScreen {

    public MyNewFloatingScreen(Vec3 position) {
        super(position);
    }

    @Override
    public void render(PoseStack stack, MultiBufferSource buffer, Camera camera, float partialTick) {
        // åœ¨é€™è£¡ç•«å‡ºä½ è¦çš„æ±è¥¿ï¼ˆç”¨ GuiQuadBatcher æˆ– font.drawï¼‰
    }

    @Override
    public void tick() {
        // å¯é¸ï¼šè®“å®ƒè·Ÿè‘—ç©å®¶ã€è½‰å‹•ã€è¨ˆæ™‚ç­‰ç­‰
    }
}
```

---

### 2ï¸âƒ£ åœ¨æŸå€‹æ™‚æ©Ÿå‘¼å«ä»¥ä¸‹è¨»å†Šæ–¹æ³•ï¼ˆé€šå¸¸åœ¨ `ClientInitcore.RuntimeEvents`ï¼‰

```java
FloatingScreen myScreen = new MyNewFloatingScreen(Minecraft.getInstance().player.position().add(0, 2, 0));
FloatingPanelManager.register("my_screen", myScreen);
FloatingPanelManager.show(myScreen);
```

> æˆ–è€…å¦‚æœä½ æƒ³è®“å®ƒé è¨­æ˜¯éš±è—çš„ï¼Œå°±åªå‘¼å« `register()`ï¼Œç­‰ç©å®¶æŒ‰éµå¾Œå†ç”¨ `toggleVisibility()` åˆ‡æ›ã€‚

---

### 3ï¸âƒ£ å»ºè­°å°‡ç†±éµå°æ‡‰æ”¾åœ¨ `ModKeyMappings.java`ï¼š

```java
public static final KeyMapping OPEN_MY_SCREEN = new KeyMapping(
    "key.magical_industry.open_my_screen", InputConstants.KEY_M, "key.categories.ui"
);
```

ç„¶å¾Œåœ¨ `onClientTick()` ä¸­åŠ ä¸Šï¼š

```java
while (OPEN_MY_SCREEN.consumeClick()) {
    FloatingPanelManager.togglePanel("my_screen");
}
```

---

### ğŸ§  å¯é¸æœ€ä½³åŒ–ï¼šå°è£é¢æ¿åˆå§‹åŒ–æ–¹æ³•

```java
public class MyScreenRegistry {
    public static void registerAll() {
        FloatingPanelManager.register("my_screen", new MyNewFloatingScreen(...));
        FloatingPanelManager.register("map_screen", new MapFloatingScreen(...));
        // ... æ›´å¤š
    }
}
```

ç„¶å¾Œåœ¨ `ClientInitcore.RuntimeEvents` è£¡ï¼š

```java
if (!initialized && mc.player != null) {
    MyScreenRegistry.registerAll();
    initialized = true;
}
```

---

## âœ… å°çµ

|å‹•ä½œ|æ–¹æ³•|
|---|---|
|æ–°å¢ç•«é¢é¡åˆ¥|`extends FloatingScreen`|
|è¨»å†Šé¢æ¿|`FloatingPanelManager.register(...)`|
|é¡¯ç¤º/éš±è—|`show()`ã€`toggleVisibility()`|
|ç¶å®šæŒ‰éµ|`KeyMapping + consumeClick()`|

---

å¦‚æœä½ è¦æˆ‘å¹«ä½ ç”¢å‡ºä¸€å€‹ç°¡åŒ–çš„ã€Œé¢æ¿è¨»å†Šå™¨æ¨¡æ¿ã€æˆ–ã€Œå‹•æ…‹å»ºç«‹é¢æ¿æŒ‰éµç³»çµ±ã€ï¼Œåªè¦èªªä¸€è²ï¼Œæˆ‘å¯ä»¥å¹«ä½ åšæˆæ¨™æº–åŒ–æ¶æ§‹ã€‚é€™æ¨£ä½ æœªä¾†å°±ä¸ç”¨æ¯æ¬¡éƒ½æ‰‹å‹•è¨»å†Šä¸€å †é¢æ¿ã€‚è¦ä¾†å—ï¼Ÿ